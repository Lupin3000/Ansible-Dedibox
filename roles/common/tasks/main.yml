---
- name: ensure max. kernels of 3
  lineinfile:
    dest: /etc/yum.conf
    regexp: "^installonly_limit"
    line: "installonly_limit=3"
    state: present
  tags: base

- name: ensure needed base packages are installed
  yum:
    name: "{{ item }}"
    state: present
  with_items:
    - "{{ base_packages }}"
  tags: base

- name: ensure global bash configuration is set
  copy:
    src: global.sh
    dest: /etc/profile.d/global.sh
    owner: root
    group: root
    mode: 0644
  tags: base
